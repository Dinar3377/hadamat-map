<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Hadamat Taxi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100%;
            width: 100%;
        }
        #info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 16px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        #send {
            width: 100%;
            padding: 12px;
            font-size: 18px;
            margin-top: 10px;
            background: #2b8eff;
            color: white;
            border: none;
            border-radius: 8px;
        }
    </style>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<div id="map"></div>

<!-- –∫–Ω–æ–ø–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ -->
<button id="locate-btn">üìç –ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</button>

<div id="info">
  <div id="start">üöï –¢–æ—á–∫–∞ A: –ù–µ –≤—ã–±—Ä–∞–Ω–∞</div>
  <div id="end">üìç –¢–æ—á–∫–∞ B: –ù–µ –≤—ã–±—Ä–∞–Ω–∞</div>
  <button id="send" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å üöÄ</button>
</div>

<script>
  let map;
  let startMarker = null;
  let endMarker = null;
  let startPos = null;
  let endPos = null;

  function initMap() {
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    map = new google.maps.Map(document.getElementById("map"), {
      zoom: 13,
      center: { lat: 15.3694, lng: 44.1910 }, // –ô–µ–º–µ–Ω
    });




<div id="info">
    <div id="start">üöï –¢–æ—á–∫–∞ A: –ù–µ –≤—ã–±—Ä–∞–Ω–∞</div>
    <div id="end">üìç –¢–æ—á–∫–∞ B: –ù–µ –≤—ã–±—Ä–∞–Ω–∞</div>
    <button id="send" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å üöÄ</button>
</div>

<script>
    let map;
    let startMarker = null;
    let endMarker = null;
    let startPos = null;
    let endPos = null;

    function initMap() {

        // ‚úÖ –≠–¢–û –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        map = new google.maps.Map(document.getElementById("map"), {
            zoom: 12,
            center: { lat: 15.3694, lng: 44.1910 },
        });

        map.addListener("click", (e) => {
            if (!startMarker) {
                startMarker = new google.maps.Marker({
                    position: e.latLng,
                    map: map,
                    label: "A"
                });
                startPos = e.latLng;
                document.getElementById("start").innerText =
                    "üöï –¢–æ—á–∫–∞ A: " + e.latLng.lat().toFixed(5) + ", " + e.latLng.lng().toFixed(5);
            } else if (!endMarker) {
                endMarker = new google.maps.Marker({
                    position: e.latLng,
                    map: map,
                    label: "B"
                });
                endPos = e.latLng;
                document.getElementById("end").innerText =
                    "üìç –¢–æ—á–∫–∞ B: " + e.latLng.lat().toFixed(5) + ", " + e.latLng.lng().toFixed(5);

                document.getElementById("send").disabled = false;
            }
        });

        document.getElementById("send").onclick = () => {
            const data = {
                start: { lat: startPos.lat(), lng: startPos.lng() },
                end: { lat: endPos.lat(), lng: endPos.lng() }
            };
console.log("sendData:", data);
            Telegram.WebApp.sendData(JSON.stringify(data));
            Telegram.WebApp.close();
        };
    }
</script>

<script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBO5RQpbrvnBEfchhCGqKTpzvqOjJyf0RI&callback=initMap">
</script>

</body>
</html>
